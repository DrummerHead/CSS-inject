<!DOCTYPE html>
<html>
<head>

<title>CSS Inject &#183; mcdlr</title>

<meta charset='utf-8'>
<meta name="author" content="DrummerHead">
<meta name="description" content="Ever wanted to change the layout and design of any given page? Perhaps test CSS through many browsers without deploying? With this tool you just type your CSS and the bookmarklet is generated for you. Then you use that bookmarklet in any given page and the styles will be applied. That easy!">

<style type="text/css">
body,
html {
  margin: 0;
  padding: 0;
  font-family: courier, monospace;
  color: #222;
  background-color: #dffff2;
}
#container {
  width: 800px;
  margin: 0 auto;
}
label {
  display: block;
  margin: 16px 0 0 0;
}
textarea {
  width: 97%;
  height: 330px;
  padding: 12px 0 12px 12px;
  margin: 4px 0 0 0;
}
input {
  width: 600px;
  height: 25px;
}
input[type="submit"] {
  width: 180px;
  cursor: pointer;
}
small {
  margin-top: 25px;
  display: block;
}
#a-holder {
  height: 17px;
  border: 1px solid #ddd;
  padding: 10px;
  background-color: #f0fbe1;
  text-align: center;
}
#a-holder a {
  cursor: move;
}
</style>

<link rel="stylesheet" href="../css/promiscuous.css?1">
<link rel="stylesheet" href="../css/theme-default.css">
<link rel="stylesheet" href="../css/codemirror.css">
<link rel='image_src' href='http://mcdlr.com/img/thumbs/css-inject.jpg'>

<script src="jquery-1.6.2.min.js"></script>
<script src="../js/libertine.js"></script>
<script src="../js/codemirror-compressed.js"></script>
<script src="../js/css.js"></script>

</head>
<body>
<header id="brand">
  <a href="/" title="Go to mcdlr homepage">Go to mcdlr homepage</a>
</header>  

<div id="container">
  <h1>CSS inject</h1>
  <p>Here you can create a Bookmarklet that will apply whatever styles you want on any page you want, useful for client demonstration and bug debunking between peers.</p>
  <form id="magia">
    <label for="sep">Here goes your css:</label>
    <textarea id="sep" spellcheck="false"></textarea>
    <label for="nome">Bookmarklet name:</label>
    <input type="text" id="nome" value="Nome" />
    <input type="submit" value="Generate Bookmarklet" />
  </form>
  <small>Drag the Bookmarklet that will appear here to your bookmarks bar and then use it in the page you want</small>
  <div id="a-holder"></div>
  <p>Interested in injecting some Javascript instead? You should check <a href='/js-inject/'>JS Inject</a>!</p>
</div>

<script>
// codeMirror activate!!
var editor = CodeMirror.fromTextArea(document.getElementById("sep"), {
  lineNumbers: true,
  matchBrackets: true
});

// Make the code magic!!
$('#magia').submit(function(){
  var raw = $('#sep').val(),
      noSingleQuote = raw.replace(/'/g,'&#39;'),
      noDoubleQuote = noSingleQuote.replace(/"/g,'&#34;'), 
      noReturnNewline = noDoubleQuote.replace(/[\r\n]/g,' '), 
      noTabs = noReturnNewline.replace(/\t/g,' '), 
      noExtraSpaces = noTabs.replace(/ +/g,' '), 
      nome = $('#nome').val();

  var importantCss = noExtraSpaces.replace(/;/g,' !important;');
  
  var aHref = "javascript:(function(){ var style = document.createElement('style'); var styleContent = document.createTextNode('"+importantCss+"'); style.appendChild(styleContent ); var caput = document.getElementsByTagName('head'); caput[0].appendChild(style); })();";

  var aElement = '<a href="'+aHref+'">'+nome+'</a>';

  $('#a-holder').empty().append(aElement);

  return false;
});
</script>
<!-- Google analytics -->
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-1030009-5");
pageTracker._trackPageview();
} catch(err) {}</script>
<!-- /Google analytics -->
</body>
</html>
